# How to Fix "No Available Slots" Issue

## Problem
Students see "No Available Slots - All interview slots for this company are currently booked" when trying to book interviews.

## Root Cause
**Interview slots have not been created yet.** Slots are not created automatically when companies create offers - they must be generated by the admin.

## Solution: Create Interview Slots (Admin Only)

### Option 1: Quick INF-Compliant Slot Generation (Recommended)

1. **Login as admin**
2. **Navigate to**: `/admin/events/{event-id}/sessions`
   - Or: Admin Dashboard â†’ Select Event â†’ "Sessions" link
3. **Click**: "Generate INF Slots" button
4. **Confirm** the dialog - this will:
   - Create 2 interview sessions automatically
   - Generate exactly 15 slots per company (8 in first session, 7 in second)
   - 10 minutes per slot, 5 minutes buffer between slots
   - Capacity: 2 students per slot

**Result**: All participating companies will immediately have 15 interview slots available for students to book!

### Option 2: Manual Session Creation

1. **Login as admin**
2. **Navigate to**: `/admin/events/{event-id}/sessions`
3. **Click**: "Create Session" button
4. **Fill in session details**:
   - Session name (e.g., "Morning Session", "Afternoon Session")
   - Start time
   - End time
   - Slot duration (e.g., 15 minutes)
   - Buffer time between slots (e.g., 5 minutes)
   - Capacity per slot (e.g., 2 students)
5. **Click**: "Create Session"
6. Slots will be automatically generated for ALL participating companies

### Option 3: Regenerate Slots for Existing Session

If you already have sessions but need more slots:

1. **Navigate to**: `/admin/events/{event-id}/sessions`
2. **Find the session** you want to regenerate
3. **Click**: "ðŸ”„ Regenerate Slots" button
4. **Confirm** - this will:
   - Keep slots that already have bookings
   - Delete unbooked slots
   - Generate fresh slots based on session settings

## Verification Steps

After generating slots:

1. **Check slot count** in the admin dashboard - should show "X Available Slots"
2. **Login as a student**
3. **Go to**: Student â†’ Offers
4. **Click**: "Book Interview" on any offer
5. **You should now see available time slots!**

## Common Issues

### Issue: "0 interview slots generated"
**Solution**: Make sure you've invited companies to the event first:
- Go to `/admin/events/{id}/quick-invite`
- Invite companies before creating sessions

### Issue: Slots show but "No Available Slots" message
**Possible causes**:
1. All slots are in the past (check session start/end times)
2. All slots are fully booked
3. Slots aren't linked to the offer (should be automatic)

## Quick SQL Check

Run this in Supabase SQL editor to verify slots exist:

```sql
-- Check if slots exist for your event
SELECT 
    c.company_name,
    COUNT(es.id) as slot_count,
    COUNT(CASE WHEN es.start_time >= NOW() AND es.is_active = true THEN 1 END) as future_slots,
    MIN(es.start_time) as first_slot,
    MAX(es.end_time) as last_slot
FROM companies c
LEFT JOIN event_slots es ON es.company_id = c.id AND es.event_id = 'YOUR-EVENT-ID-HERE'
GROUP BY c.id, c.company_name
ORDER BY c.company_name;
```

Replace `YOUR-EVENT-ID-HERE` with your actual event ID.

## Summary

**The fix is simple**: Admin must generate slots via the Sessions page!

1. Admin â†’ Events â†’ Select Event â†’ Sessions
2. Click "Generate INF Slots" (fastest)
3. Students can now book interviews!
